<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>Python中的魔术方法 | 张先森的代码小屋</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="Python">
  
  
  
  
  <meta name="description" content="本文将详细描述Python中的魔术方法，这些方法是Python中很有意思也很重要的一部分内容，掌握它们可以让你对Python的面向对象特性有更深的理解，也会让你的Python技能更上一层楼。">
<meta name="keywords" content="Python">
<meta property="og:type" content="article">
<meta property="og:title" content="Python中的魔术方法">
<meta property="og:url" content="https://nullcc.github.io/2017/06/12/Python中的魔术方法/index.html">
<meta property="og:site_name" content="张先森的代码小屋">
<meta property="og:description" content="本文将详细描述Python中的魔术方法，这些方法是Python中很有意思也很重要的一部分内容，掌握它们可以让你对Python的面向对象特性有更深的理解，也会让你的Python技能更上一层楼。">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2022-04-15T03:41:13.017Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python中的魔术方法">
<meta name="twitter:description" content="本文将详细描述Python中的魔术方法，这些方法是Python中很有意思也很重要的一部分内容，掌握它们可以让你对Python的面向对象特性有更深的理解，也会让你的Python技能更上一层楼。">
  
    <link rel="alternate" href="/atom.xml" title="张先森的代码小屋" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css">
  <link rel="stylesheet" href="/css/fashion.css">
  <link rel="stylesheet" href="/css/glyphs.css">

</head>
</html>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  


<header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" rel="home" >
                <img style="margin-bottom: 10px;"  width="124px" height="124px" alt="Hike News" src=" /css/images/logo.jpg">
              </a>
            
          </h1>
          
          
            <div class="site-description">明镜止水</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">首页</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">归档</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/categories">分类</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/tags">标签</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/about">关于</a> </li>
                    
              </ul>
            </div>
          </nav>

      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-Python中的魔术方法" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      Python中的魔术方法
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/06/12/Python中的魔术方法/" class="article-date">
	  <time datetime="2017-06-11T16:00:00.000Z" itemprop="datePublished">六月 12, 2017</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/编程语言/">编程语言</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>本文将详细描述Python中的魔术方法，这些方法是Python中很有意思也很重要的一部分内容，掌握它们可以让你对Python的面向对象特性有更深的理解，也会让你的Python技能更上一层楼。</p>
<a id="more"></a>
<h2 id="Python的魔术方法分类"><a href="#Python的魔术方法分类" class="headerlink" title="Python的魔术方法分类"></a>Python的魔术方法分类</h2><p>我们会从几个大类来讨论Python的魔术方法：</p>
<ol>
<li>对象的构造和初始化</li>
<li>用于比较和运算符的魔术方法</li>
<li>打印对象的魔术方法</li>
<li>控制对象属性访问的魔术方法</li>
<li>可迭代对象和容器的魔术方法</li>
<li>反射的魔术方法</li>
<li>可调用的对象的魔术方法</li>
<li>会话管理的魔术方法</li>
<li>创建对象描述器的魔术方法</li>
<li>拷贝的魔术方法</li>
<li>对象的序列化和反序列化的魔术方法</li>
</ol>
<h3 id="1-对象的构造和初始化"><a href="#1-对象的构造和初始化" class="headerlink" title="1.对象的构造和初始化"></a>1.对象的构造和初始化</h3><table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__new__(cls, [,…])</td>
<td style="text-align:left">创建新的类实例</td>
</tr>
<tr>
<td style="text-align:left">__init__(self, [,…])</td>
<td style="text-align:left">初始化类实例</td>
</tr>
<tr>
<td style="text-align:left">__del__(self)</td>
<td style="text-align:left">在对象被垃圾回收时调用</td>
</tr>
</tbody>
</table>
<p>来看下面这段代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProgramLauguage</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        print(<span class="string">"in __init__ &#123;&#125;"</span>.format(self))</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, name, *args, **kwargs)</span>:</span></span><br><span class="line">        print(<span class="string">"in __new__ &#123;&#125;"</span>.format(cls))</span><br><span class="line">        <span class="keyword">return</span> object.__new__(cls, *args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"in __del__ &#123;&#125;"</span>.format(self.name))</span><br><span class="line">        <span class="keyword">del</span> self</span><br><span class="line"></span><br><span class="line">d1 = dict()</span><br><span class="line">d2 = dict()</span><br><span class="line">d3 = dict()</span><br><span class="line"></span><br><span class="line">d1[<span class="string">"ruby"</span>] = ProgramLauguage(<span class="string">"Ruby"</span>)</span><br><span class="line">d2[<span class="string">"ruby"</span>] = d1[<span class="string">"ruby"</span>]</span><br><span class="line">d3[<span class="string">"ruby"</span>] = d1[<span class="string">"ruby"</span>]</span><br><span class="line"></span><br><span class="line">print(<span class="string">'del d1["ruby"]'</span>)</span><br><span class="line"><span class="keyword">del</span> d1[<span class="string">"ruby"</span>]</span><br><span class="line"></span><br><span class="line">print(<span class="string">'del d2["ruby"]'</span>)</span><br><span class="line"><span class="keyword">del</span> d2[<span class="string">"ruby"</span>]</span><br><span class="line"></span><br><span class="line">print(<span class="string">'del d3["ruby"]'</span>)</span><br><span class="line"><span class="keyword">del</span> d3[<span class="string">"ruby"</span>]</span><br><span class="line"></span><br><span class="line">python = ProgramLauguage(<span class="string">"Python"</span>)</span><br></pre></td></tr></table></figure>
<p>运行上面的代码，会打印：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">in</span> __new__ &lt;<span class="class"><span class="keyword">class</span> '<span class="title">__main__</span>.<span class="title">ProgramLauguage</span>'&gt;</span></span><br><span class="line"><span class="class"><span class="title">in</span> <span class="title">__init__</span> &lt;<span class="title">__main__</span>.<span class="title">ProgramLauguage</span> <span class="title">object</span> <span class="title">at</span> 0<span class="title">x10daf3080</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">del</span> <span class="title">d1</span>["<span class="title">ruby</span>"]</span></span><br><span class="line"><span class="class"><span class="title">del</span> <span class="title">d2</span>["<span class="title">ruby</span>"]</span></span><br><span class="line"><span class="class"><span class="title">del</span> <span class="title">d3</span>["<span class="title">ruby</span>"]</span></span><br><span class="line"><span class="class"><span class="title">in</span> <span class="title">__del__</span> <span class="title">Ruby</span></span></span><br><span class="line"><span class="class"><span class="title">in</span> <span class="title">__new__</span> &lt;<span class="title">class</span> '<span class="title">__main__</span>.<span class="title">ProgramLauguage</span>'&gt;</span></span><br><span class="line"><span class="class"><span class="title">in</span> <span class="title">__init__</span> &lt;<span class="title">__main__</span>.<span class="title">ProgramLauguage</span> <span class="title">object</span> <span class="title">at</span> 0<span class="title">x10daf3080</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">in</span> <span class="title">__del__</span> <span class="title">Python</span></span></span><br></pre></td></tr></table></figure>
<p>从上面的输出可以看出，在实例化一个类时，将首先调用该类的<code>__new__</code>方法，在<code>__new__</code>方法中创建一个新对象，然后把实例化类时传入的参数原封不动地传递给<code>__init__</code>方法。在<code>__init__</code>方法内部，初始化这个实例。需要注意的是，<code>__new__</code>需要返回这个新创建的对象，而<code>__init__</code>不需要返回任何东西。因为<code>__new__</code>负责生成新实例，<code>__init__</code>负责初始化这个新实例。需要注意的是，如果<code>__new__</code>没有正确返回当前类cls的实例，那<code>__init__</code>是不会被调用的，即使是父类的实例也不行。</p>
<p>比较会让人迷惑的是<code>__del__</code>方法，乍一看会以为在调用<code>del obj</code>时调用对象的<code>__del__</code>，其实不是这样的，注意观察<code>d1</code>、<code>d2</code>和<code>d3</code>，这三个字典引用了同一个ProgramLauguage实例，在依次对这三个字典用引用的同一个实例调用<code>del</code>时，只有在<code>del d3[&quot;ruby&quot;]</code>之后才打印了<code>in __del__ Ruby</code>。这就说明并不是<code>del obj</code>这个操作触发了<code>__del__</code>，准确地说，<code>__del__</code>会在对象被垃圾回收的时候被调用。因此我们可以把一些对象内部的清理操作放在<code>__del__</code>中。</p>
<h3 id="2-用于比较和运算符的魔术方法"><a href="#2-用于比较和运算符的魔术方法" class="headerlink" title="2.用于比较和运算符的魔术方法"></a>2.用于比较和运算符的魔术方法</h3><h4 id="用于比较的魔术方法"><a href="#用于比较的魔术方法" class="headerlink" title="用于比较的魔术方法"></a>用于比较的魔术方法</h4><table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__cmp__(self, other)</td>
<td style="text-align:left">定义了大于、小于和等于的方法</td>
</tr>
<tr>
<td style="text-align:left">__eq__(self, other)</td>
<td style="text-align:left">定义了等号的行为, ==</td>
</tr>
<tr>
<td style="text-align:left">__ne__(self, other)</td>
<td style="text-align:left">定义了不等号的行为, !=</td>
</tr>
<tr>
<td style="text-align:left">__lt__(self, other)</td>
<td style="text-align:left">定义了小于号的行为， &lt;</td>
</tr>
<tr>
<td style="text-align:left">__gt__(self, other)</td>
<td style="text-align:left">定义了大于号的行为， &gt;</td>
</tr>
<tr>
<td style="text-align:left">__le__(self, other)</td>
<td style="text-align:left">定义了小于等于号的行为， &lt;=</td>
</tr>
<tr>
<td style="text-align:left">__ge__(self, other)</td>
<td style="text-align:left">定义了大于等于号的行为， &gt;=</td>
</tr>
</tbody>
</table>
<p>来看下面这段代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age, weight)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.weight = weight</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__cmp__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.age &lt; s.age:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        <span class="keyword">elif</span> self.age &gt; s.age:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name == other.name <span class="keyword">and</span> self.age == other.age <span class="keyword">and</span> self.weight == other.weight</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__ne__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name != other.name <span class="keyword">or</span> self.age != other.age <span class="keyword">or</span> self.weight != other.weight</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.age &lt; other.age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__gt__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.age &gt; other.age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__le__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.age &lt;= other.age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__ge__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.age &gt;= other.age</span><br><span class="line"></span><br><span class="line">cat1 = Cat(<span class="string">'Mio'</span>, <span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line">cat2 = Cat(<span class="string">'Mio'</span>, <span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line">cat3 = Cat(<span class="string">'Lam'</span>, <span class="number">2</span>, <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">print(cat1 == cat2)  <span class="comment"># True</span></span><br><span class="line">print(cat2 == cat3)  <span class="comment"># False</span></span><br><span class="line">print(cat2 != cat3)  <span class="comment"># True</span></span><br><span class="line">print(cat1 &lt; cat3)  <span class="comment"># True</span></span><br><span class="line">print(cat1 &lt;= cat3)  <span class="comment"># True</span></span><br><span class="line">print(cat3 &gt; cat1)  <span class="comment"># True</span></span><br><span class="line">print(cat3 &gt;= cat1)  <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<p>需要说明的是，<code>__cmp__</code>定义了大于、小于和等于的方法，当前对象大于、小于和等于另一个对象时，它的返回值分别大于0、小于0和等于0。其他几个用于比较的魔术方法的含义就如开头所述，很好理解。</p>
<h4 id="用于运算符的魔术方法"><a href="#用于运算符的魔术方法" class="headerlink" title="用于运算符的魔术方法"></a>用于运算符的魔术方法</h4><p>一元操作符和函数魔术方法</p>
<table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__pos__(self)</td>
<td style="text-align:left">实现+号的特性</td>
</tr>
<tr>
<td style="text-align:left">__neg__(self)</td>
<td style="text-align:left">实现-号的特性</td>
</tr>
<tr>
<td style="text-align:left">__abs__(self)</td>
<td style="text-align:left">实现内置 abs() 函数的特性</td>
</tr>
<tr>
<td style="text-align:left">__invert__(self)</td>
<td style="text-align:left">实现~符号的特性(取反)</td>
</tr>
</tbody>
</table>
<p>看下面这段代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__pos__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.age += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__neg__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.age -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__abs__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> abs(self.age)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__invert__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> ~self.age</span><br><span class="line"></span><br><span class="line">p = Person(<span class="string">'Jack'</span>, <span class="number">20</span>)</span><br><span class="line">print(p.age)  <span class="comment"># 20</span></span><br><span class="line">+p</span><br><span class="line">print(p.age)  <span class="comment"># 21</span></span><br><span class="line">-p</span><br><span class="line">print(p.age)  <span class="comment"># 20</span></span><br><span class="line">print(abs(p)) <span class="comment"># 20</span></span><br><span class="line">print(~p) <span class="comment"># -21</span></span><br></pre></td></tr></table></figure>
<p>这段代码很简单，就不过多解释了。</p>
<p>普通算数操作符魔术方法</p>
<table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__add__(self, other)</td>
<td style="text-align:left">实现加法</td>
</tr>
<tr>
<td style="text-align:left">__sub__(self, other)</td>
<td style="text-align:left">实现减法</td>
</tr>
<tr>
<td style="text-align:left">__mul__(self, other)</td>
<td style="text-align:left">实现乘法</td>
</tr>
<tr>
<td style="text-align:left">__floordiv__(self, other)</td>
<td style="text-align:left">实现地板除法(//)，即整数除法</td>
</tr>
<tr>
<td style="text-align:left">__div__(self, other)</td>
<td style="text-align:left">实现/符号的除法，只在py2生效</td>
</tr>
<tr>
<td style="text-align:left">__truediv__(self, other)</td>
<td style="text-align:left">实现真除法，用于py3</td>
</tr>
<tr>
<td style="text-align:left">__mod__(self, other)</td>
<td style="text-align:left">实现取模运算</td>
</tr>
<tr>
<td style="text-align:left">__divmod___(self, other)</td>
<td style="text-align:left">实现内置的divmod()函数</td>
</tr>
<tr>
<td style="text-align:left">__pow__(self, other)</td>
<td style="text-align:left">实现**指数运算</td>
</tr>
<tr>
<td style="text-align:left">__lshift__(self, other)</td>
<td style="text-align:left">实现使用 &lt;&lt; 的按位左移位</td>
</tr>
<tr>
<td style="text-align:left">__rshift__(self, other)</td>
<td style="text-align:left">实现使用 &gt;&gt; 的按位右移位</td>
</tr>
<tr>
<td style="text-align:left">__and__(self, other)</td>
<td style="text-align:left">实现使用 &amp; 的按位与</td>
</tr>
<tr>
<td style="text-align:left">__or__(self, other)</td>
<td style="text-align:left">实现使用 \</td>
<td>的按位或</td>
</tr>
<tr>
<td style="text-align:left">__xor__(self, other)</td>
<td style="text-align:left">实现使用 ^ 的按位异或</td>
</tr>
</tbody>
</table>
<p>我们来实现一个MyNumber类：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyNumber</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, num)</span>:</span></span><br><span class="line">        self.num = num</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__add__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        MyNumber(x) + MyNumber(y)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__(self.num + other.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__sub__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        MyNumber(x) - MyNumber(y)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__(self.num - other.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__mul__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        MyNumber(x) * MyNumber(y)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__(self.num * other.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__floordiv__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        MyNumber(x) // MyNumber(y)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__(self.num // other.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__div__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        [in py2] MyNumber(x) / MyNumber(y)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__(self.num / other.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__truediv__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        [in py3] MyNumber(x) / MyNumber(y)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__(self.num / other.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__mod__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        MyNumber(x) % MyNumber(y)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__(self.num % other.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__pow__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        MyNumber(x) ** MyNumber(y)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__(self.num ** other.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lshift__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        MyNumber(x) &lt;&lt; MyNumber(y)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__(self.num &lt;&lt; other.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rshift__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        MyNumber(x) &gt;&gt; MyNumber(y)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__(self.num &gt;&gt; other.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__and__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        MyNumber(x) &amp; MyNumber(y)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__(self.num &amp; other.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__or__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        MyNumber(x) | MyNumber(y)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__(self.num | other.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__xor__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        MyNumber(x) ^ MyNumber(y)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.__class__(self.num ^ other.num)</span><br><span class="line"></span><br><span class="line">num1 = MyNumber(<span class="number">2</span>)</span><br><span class="line">num2 = MyNumber(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">num3 = num1 + num2</span><br><span class="line">num4 = num2 - num1</span><br><span class="line">num5 = num1 * num2</span><br><span class="line">num7 = num2 // num1</span><br><span class="line">num8 = num2 / num1</span><br><span class="line">num9 = num2 % num1</span><br><span class="line">num10 = num2 ** num1</span><br><span class="line">num11 = num2 &lt;&lt; num1</span><br><span class="line">num12 = num2 &gt;&gt; num1</span><br><span class="line">num13 = num2 &amp; num1</span><br><span class="line">num14 = num2 | num1</span><br><span class="line">num15 = num2 ^ num1</span><br><span class="line"></span><br><span class="line">print(num3.num)  <span class="comment"># 5 (2+3)</span></span><br><span class="line">print(num4.num)  <span class="comment"># 1 (3-2)</span></span><br><span class="line">print(num5.num)  <span class="comment"># 6 (2*3)</span></span><br><span class="line">print(num7.num)  <span class="comment"># 1 (3//2)</span></span><br><span class="line">print(num8.num)  <span class="comment"># 1.5 (3/2)</span></span><br><span class="line">print(num9.num)  <span class="comment"># 1 (3%2)</span></span><br><span class="line">print(num10.num)  <span class="comment"># 9 (3**2)</span></span><br><span class="line">print(num11.num)  <span class="comment"># 12 (3&lt;&lt;2)</span></span><br><span class="line">print(num12.num)  <span class="comment"># 0 (3&gt;&gt;2)</span></span><br><span class="line">print(num13.num)  <span class="comment"># 2 (3&amp;2)</span></span><br><span class="line">print(num14.num)  <span class="comment"># 3 (3|2)</span></span><br><span class="line">print(num15.num)  <span class="comment"># 1 (3^2)</span></span><br></pre></td></tr></table></figure>
<p>这部分代码也相对简单，就不解释了。</p>
<p>另外，普通算数操作符魔术方法均有相对应的反运算符魔术方法，即把两个操作数的位置对调，它们对应的反运算符魔术方法就是在方法名前<code>__</code>后加上<code>r</code>，比如<code>__add__</code>的反运算符魔术方法就是<code>__radd__</code>，其他的以此类推。</p>
<p>增量赋值魔术方法</p>
<table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__iadd__(self, other)</td>
<td style="text-align:left">实现赋值加法 +=</td>
</tr>
<tr>
<td style="text-align:left">__isub__(self, other)</td>
<td style="text-align:left">实现赋值减法 -=</td>
</tr>
<tr>
<td style="text-align:left">__mul__(self, other)</td>
<td style="text-align:left">实现赋值乘法 *=</td>
</tr>
<tr>
<td style="text-align:left">__ifloordiv__(self, other)</td>
<td style="text-align:left">实现赋值地板除法(//=)，即整数除法</td>
</tr>
<tr>
<td style="text-align:left">__idiv__(self, other)</td>
<td style="text-align:left">实现/符号的赋值除法 /=</td>
</tr>
<tr>
<td style="text-align:left">__itruediv__(self, other)</td>
<td style="text-align:left">实现赋值真除法，需要from <strong>future</strong> import division</td>
</tr>
<tr>
<td style="text-align:left">__imod__(self, other)</td>
<td style="text-align:left">实现赋值取模运算 %=</td>
</tr>
<tr>
<td style="text-align:left">__pow__(self, other)</td>
<td style="text-align:left">实现指数赋值运算 **=</td>
</tr>
<tr>
<td style="text-align:left">__ilshift__(self, other)</td>
<td style="text-align:left">实现使用 &lt;&lt;= 的赋值按位左移位</td>
</tr>
<tr>
<td style="text-align:left">__irshift__(self, other)</td>
<td style="text-align:left">实现使用 &gt;&gt;= 的赋值按位右移位</td>
</tr>
<tr>
<td style="text-align:left">__iand__(self, other)</td>
<td style="text-align:left">实现使用 &amp;= 的赋值按位与赋值</td>
</tr>
<tr>
<td style="text-align:left">__ior__(self, other)</td>
<td style="text-align:left">实现使用 \</td>
<td>= 的赋值按位或</td>
</tr>
<tr>
<td style="text-align:left">__ixor__(self, other)</td>
<td style="text-align:left">实现使用 ^= 的赋值按位异或</td>
</tr>
</tbody>
</table>
<p>这部分魔术方法的示例代码和上面的差不多，只是把相应的运算改成赋值运算而已，代码略。</p>
<p>类型转换魔术方法</p>
<table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__int__(self)</td>
<td style="text-align:left">实现整形的强制转换</td>
</tr>
<tr>
<td style="text-align:left">__long__self)</td>
<td style="text-align:left">实现长整形的强制转换，long在py3中和int整合了</td>
</tr>
<tr>
<td style="text-align:left">__float__(self)</td>
<td style="text-align:left">实现浮点型的强制转换</td>
</tr>
<tr>
<td style="text-align:left">__complex__(self)</td>
<td style="text-align:left">实现复数的强制转换</td>
</tr>
<tr>
<td style="text-align:left">__bin__(self)</td>
<td style="text-align:left">实现二进制数的强制转换</td>
</tr>
<tr>
<td style="text-align:left">__oct__(self)</td>
<td style="text-align:left">实现八进制的强制转换</td>
</tr>
<tr>
<td style="text-align:left">__hex__(self)</td>
<td style="text-align:left">实现十六进制的强制转换</td>
</tr>
<tr>
<td style="text-align:left">__index__(self)</td>
<td style="text-align:left">当对象是被应用在切片表达式中时，实现整形强制转换</td>
</tr>
<tr>
<td style="text-align:left">__trunc__(self)</td>
<td style="text-align:left">当使用 math.trunc(self) 的时候被调用，整数截断</td>
</tr>
<tr>
<td style="text-align:left">__coerce__(self, other)</td>
<td style="text-align:left">实现混合模式算数，只在py2有效</td>
</tr>
</tbody>
</table>
<h3 id="3-打印对象的魔术方法"><a href="#3-打印对象的魔术方法" class="headerlink" title="3.打印对象的魔术方法"></a>3.打印对象的魔术方法</h3><table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__str__(self)</td>
<td style="text-align:left">定义当 str() 调用的时候的返回值(人类可读)</td>
</tr>
<tr>
<td style="text-align:left">__repr__(self)</td>
<td style="text-align:left">定义当 repr() 被调用的时候的返回值(机器可读)</td>
</tr>
<tr>
<td style="text-align:left">__unicode__self)</td>
<td style="text-align:left">定义当 unicode() 调用的时候的返回值，只在py2中有效</td>
</tr>
<tr>
<td style="text-align:left">__hash__(self)</td>
<td style="text-align:left">定义当 hash() 调用的时候的返回值，它返回一个整形</td>
</tr>
<tr>
<td style="text-align:left">__nonzero__(self)</td>
<td style="text-align:left">定义当 bool() 调用的时候的返回值</td>
</tr>
</tbody>
</table>
<p>示例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyNumber</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, num)</span>:</span></span><br><span class="line">        self.num = num</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        str(MyNumber(x))</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> str(self.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        repr(MyNumber(x))</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"&lt;&#123;&#125; &#123;&#125;&gt;"</span>.format(__class__, str(self.num))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__unicode__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        [only in py2] unicode(MyNumber(x))</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> str(self.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__hash__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        hash(MyNumber(x))</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> hash(self.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__nonzero__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        [only in py2] nonzero(MyNumber(x))</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> bool(self.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__bool__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        [only in py3] bool(MyNumber(x))</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> bool(self.num)</span><br><span class="line"></span><br><span class="line">num1 = MyNumber(<span class="number">123</span>)</span><br><span class="line">num2 = MyNumber(<span class="number">0</span>)</span><br><span class="line">print(str(num1))  <span class="comment"># 123</span></span><br><span class="line">print(repr(num1))  <span class="comment"># &lt;&lt;class '__main__.MyNumber'&gt; 123&gt;</span></span><br><span class="line">print(hash(num1))  <span class="comment"># 123</span></span><br><span class="line">print(bool(num1))  <span class="comment"># True</span></span><br><span class="line">print(bool(num2))  <span class="comment"># False</span></span><br></pre></td></tr></table></figure>
<h3 id="4-控制对象属性访问的魔术方法"><a href="#4-控制对象属性访问的魔术方法" class="headerlink" title="4.控制对象属性访问的魔术方法"></a>4.控制对象属性访问的魔术方法</h3><table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__getattr__(self, name)</td>
<td style="text-align:left">当用户试图访问一个根本不存在（或者暂时不存在）的属性时，你可以通过这个魔法方法来定义类的行为</td>
</tr>
<tr>
<td style="text-align:left">__setattr__(self, name, value)</td>
<td style="text-align:left">定义当试图对一个对象的属性赋值时的行为</td>
</tr>
<tr>
<td style="text-align:left">__delattr__(self, name)</td>
<td style="text-align:left">定义当试图删除一个对象的属性时的行为</td>
</tr>
<tr>
<td style="text-align:left">__getattribute__(self, name)</td>
<td style="text-align:left"><strong>getattribute</strong> 允许你自定义属性被访问时的行为，只能用于新式类，而且很容易引起无限递归调用，可以用过使用父类的<strong>getattribute</strong>避免，建议不要使用</td>
</tr>
</tbody>
</table>
<p>示例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        print(<span class="string">'in __getattr__'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setattr__</span><span class="params">(self, name, value)</span>:</span></span><br><span class="line">        print(<span class="string">'in __setattr__'</span>)</span><br><span class="line">        self.__dict__[name] = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delattr__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        print(<span class="string">'in __delattr__'</span>)</span><br><span class="line">        self.__dict__[name] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">p = Person(<span class="string">"Jack"</span>)  <span class="comment"># in __setattr__</span></span><br><span class="line">print(p.name) <span class="comment"># Jack</span></span><br><span class="line">print(p.no_exit_attr) <span class="comment"># in __getattr__, None</span></span><br><span class="line">p.name = <span class="string">"Smith"</span> <span class="comment">#  in __setattr__</span></span><br><span class="line">print(p.name) <span class="comment"># Smith</span></span><br><span class="line"><span class="keyword">del</span> p.name  <span class="comment"># in __delattr__</span></span><br><span class="line">print(p.name) <span class="comment"># None</span></span><br></pre></td></tr></table></figure>
<h3 id="5-可迭代对象和容器的魔术方法"><a href="#5-可迭代对象和容器的魔术方法" class="headerlink" title="5.可迭代对象和容器的魔术方法"></a>5.可迭代对象和容器的魔术方法</h3><table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__len__(self)</td>
<td style="text-align:left">定义调用len()函数时的行为</td>
</tr>
<tr>
<td style="text-align:left">__getitem__(self, key)</td>
<td style="text-align:left">定义获取容器内容时的行为</td>
</tr>
<tr>
<td style="text-align:left">__setitem__(self, key, value)</td>
<td style="text-align:left">定义设置容器内容时的行为</td>
</tr>
<tr>
<td style="text-align:left">__delitem__(self, key)</td>
<td style="text-align:left">定义删除容器内容时的行为</td>
</tr>
<tr>
<td style="text-align:left">__iter__(self)</td>
<td style="text-align:left">定义迭代容器内容时的行为</td>
</tr>
<tr>
<td style="text-align:left">__contains__(self, item)</td>
<td style="text-align:left">定义对容器使用in时的行为</td>
</tr>
<tr>
<td style="text-align:left">__reversed__(self)</td>
<td style="text-align:left">定义对容器使用reversed()时的行为</td>
</tr>
</tbody>
</table>
<p>示例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDictIterator</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self.i = <span class="number">0</span></span><br><span class="line">        self.n = n</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.i &lt; self.n:</span><br><span class="line">            i = self.i</span><br><span class="line">            self.i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> StopIteration()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyList</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, list=[])</span>:</span></span><br><span class="line">        self.list = list</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> len(self.list)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, key)</span>:</span></span><br><span class="line">        print(<span class="string">'in __getitem__'</span>)</span><br><span class="line">        <span class="keyword">return</span> self.list[key]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, key, value)</span>:</span></span><br><span class="line">        print(<span class="string">'in __setitem__'</span>)</span><br><span class="line">        self.list[key] = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delitem__</span><span class="params">(self, key)</span>:</span></span><br><span class="line">        print(<span class="string">'in __delitem__'</span>)</span><br><span class="line">        <span class="keyword">del</span> self.list[key]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'in __iter__'</span>)</span><br><span class="line">        <span class="keyword">return</span> iter(self.list)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__contains__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        print(<span class="string">'in __contains__'</span>)</span><br><span class="line">        <span class="keyword">return</span> item <span class="keyword">in</span> self.list</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__reversed__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'in __reversed__'</span>)</span><br><span class="line">        <span class="keyword">return</span> reversed(self.list)</span><br><span class="line"></span><br><span class="line">list1 = MyList([<span class="string">"foo"</span>, <span class="string">"bar"</span>, <span class="string">"baz"</span>])</span><br><span class="line">print(len(list1))  <span class="comment"># 3</span></span><br><span class="line">print(list1[<span class="number">0</span>])  <span class="comment"># in __getitem__ foo</span></span><br><span class="line">list1[<span class="number">0</span>] = <span class="string">'FOO'</span>  <span class="comment"># in __setitem__</span></span><br><span class="line">print(list1[<span class="number">0</span>])  <span class="comment"># in __getitem__ FOO</span></span><br><span class="line"><span class="keyword">del</span> list1[<span class="number">0</span>]  <span class="comment"># in __delitem__</span></span><br><span class="line">print(list1[<span class="number">0</span>])  <span class="comment"># in __getitem__ bar</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> w <span class="keyword">in</span> list1:</span><br><span class="line">    print(w)  <span class="comment"># in __iter__ bar baz</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">"bar"</span> <span class="keyword">in</span> list1)  <span class="comment"># in __contains__ True</span></span><br><span class="line">print(<span class="string">"BAR"</span> <span class="keyword">in</span> list1)  <span class="comment"># in __contains__ False</span></span><br><span class="line">print(reversed(list1)) <span class="comment"># in __reversed__ &lt;list_reverseiterator object at 0x110005128&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="6-反射"><a href="#6-反射" class="headerlink" title="6.反射"></a>6.反射</h3><table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__instancecheck__(self, instance)</td>
<td style="text-align:left">检查一个实例是否是你定义的类的一个实例（例如 isinstance(instance, class) ）</td>
</tr>
<tr>
<td style="text-align:left">__subclasscheck__(self, subclass)</td>
<td style="text-align:left">检查一个类是否是你定义的类的子类（例如 issubclass(subclass, class) ）</td>
</tr>
</tbody>
</table>
<h3 id="7-可调用的对象的魔术方法"><a href="#7-可调用的对象的魔术方法" class="headerlink" title="7.可调用的对象的魔术方法"></a>7.可调用的对象的魔术方法</h3><table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__call__(self, [args…]</td>
<td style="text-align:left">使对象可以像函数一样被调用</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line"></span><br><span class="line">p = Point(<span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">print(<span class="string">"(&#123;&#125;, &#123;&#125;)"</span>.format(p.x, p.y))  <span class="comment"># (1, 0)</span></span><br><span class="line">p(<span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">print(<span class="string">"(&#123;&#125;, &#123;&#125;)"</span>.format(p.x, p.y))  <span class="comment"># (2, 1)</span></span><br></pre></td></tr></table></figure>
<p>定义了<code>__call__</code>方法的类的实例可以像函数一样被调用。</p>
<h3 id="8-会话管理的魔术方法"><a href="#8-会话管理的魔术方法" class="headerlink" title="8.会话管理的魔术方法"></a>8.会话管理的魔术方法</h3><table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__enter__(self)</td>
<td style="text-align:left">定义了当会话开始的时候初始化对象的行为</td>
</tr>
<tr>
<td style="text-align:left">__exit__(self, exception_type, exception_val, trace)</td>
<td style="text-align:left">定义了当会话结束时的行为</td>
</tr>
</tbody>
</table>
<p>Python可以通过<code>with</code>来开启一个会话控制器，会话控制器通过两个魔术方法来定义：<code>__enter__(self)</code>和<code>__exit__(self, exception_type, exception_val, trace)</code>。<code>__enter__</code>定义了当会话开始的时候初始化对象的行为，它的返回值会被<code>with</code>语句的目标或<code>as</code>后面的名字绑定。<code>__exit__</code>定义了当会话结束时的行为，它一般做一些清理工作，比如关键文件等。如果<code>with</code>代码块执行成功，<code>__exit__</code>的<code>exception_type</code>、<code>exception_val</code>和<code>trace</code>三个参数都会是None，如果执行失败，你可以在会话管理器内处理这个异常或将异常交由用户处理。如果要在会话管理器内处理异常，<code>__exit__</code>最后要返回<code>True</code>。</p>
<p>来看一个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FileObject</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, file)</span>:</span></span><br><span class="line">        self.file = file</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.file</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exception_type, exception_val, trace)</span>:</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.file.close()</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            print(<span class="string">'File close failed!'</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> FileObject(open(<span class="string">'./test.py'</span>)) <span class="keyword">as</span> file:</span><br><span class="line">    print(file)  <span class="comment"># &lt;_io.TextIOWrapper name='./test.py' mode='r' encoding='UTF-8'&gt;</span></span><br></pre></td></tr></table></figure>
<p>通过使用会话管理器，我们可以包装对象的打开和关闭操作，减少忘记关闭资源这种误操作。</p>
<h3 id="9-创建对象描述器的魔术方法"><a href="#9-创建对象描述器的魔术方法" class="headerlink" title="9.创建对象描述器的魔术方法"></a>9.创建对象描述器的魔术方法</h3><table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__get__(self, instance, owner)</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">__set__(self, instance, value)</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">__delete__(self, instance)</td>
</tr>
</tbody>
</table>
<ol start="10">
<li>拷贝的魔术方法</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__copy__(self)</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">__deepcopy__(self, memodict=)</td>
</tr>
</tbody>
</table>
<h3 id="11-对象的序列化和反序列化的魔术方法"><a href="#11-对象的序列化和反序列化的魔术方法" class="headerlink" title="11. 对象的序列化和反序列化的魔术方法"></a>11. 对象的序列化和反序列化的魔术方法</h3><table>
<thead>
<tr>
<th style="text-align:left">方法名</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">__getinitargs__(self)</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">__getnewargs__(self)</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">__getstate__(self)</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">__setstate__(self, state)</td>
</tr>
</tbody>
</table>

        <!-- <h3>看了文章如果觉得喜欢的话可以捐赠哦！支付宝二维码：</h3>
        <img src="/assets/images/post_imgs/code_alipay.png" width=300 height=300> -->
      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/编程语言/">编程语言</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

      
        
	<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script src="/js/md5.min.js"></script>
<div id="gitalk-container"></div>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '4010e28e5153ab82b468',
        clientSecret: '217df2318bd891ba87b82dae5d67d7ae77bc1f17',
        id: md5(location.href),
        repo: 'nullcc-blog-comments',
        owner: 'nullcc',
        admin: 'nullcc',
        distractionFreeMode: 'true'
    })
    gitalk.render('gitalk-container')
</script>


      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/06/12/Python中_x,__x和__x__的区别/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          Python中_x,__x和__x__的区别
        
      </div>
    </a>
  
  
    <a href="/2017/06/09/Python包导入详解/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">Python包导入详解</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    
      <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Python的魔术方法分类"><span class="nav-number">1.</span> <span class="nav-text">Python的魔术方法分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-对象的构造和初始化"><span class="nav-number">1.1.</span> <span class="nav-text">1.对象的构造和初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-用于比较和运算符的魔术方法"><span class="nav-number">1.2.</span> <span class="nav-text">2.用于比较和运算符的魔术方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#用于比较的魔术方法"><span class="nav-number">1.2.1.</span> <span class="nav-text">用于比较的魔术方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#用于运算符的魔术方法"><span class="nav-number">1.2.2.</span> <span class="nav-text">用于运算符的魔术方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-打印对象的魔术方法"><span class="nav-number">1.3.</span> <span class="nav-text">3.打印对象的魔术方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-控制对象属性访问的魔术方法"><span class="nav-number">1.4.</span> <span class="nav-text">4.控制对象属性访问的魔术方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-可迭代对象和容器的魔术方法"><span class="nav-number">1.5.</span> <span class="nav-text">5.可迭代对象和容器的魔术方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-反射"><span class="nav-number">1.6.</span> <span class="nav-text">6.反射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-可调用的对象的魔术方法"><span class="nav-number">1.7.</span> <span class="nav-text">7.可调用的对象的魔术方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-会话管理的魔术方法"><span class="nav-number">1.8.</span> <span class="nav-text">8.会话管理的魔术方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-创建对象描述器的魔术方法"><span class="nav-number">1.9.</span> <span class="nav-text">9.创建对象描述器的魔术方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-对象的序列化和反序列化的魔术方法"><span class="nav-number">1.10.</span> <span class="nav-text">11. 对象的序列化和反序列化的魔术方法</span></a></li></ol></li></ol>
    
    </div>
  </aside>

</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2023 张先森的代码小屋 All Rights Reserved.
        
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
    
</script>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/bootstrap.js"></script>
<script src="/js/main.js"></script>













  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>

  <!-- 百度统计 -->
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?c3ffa09eef07ac510ef2ab126054b1cd";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
    
</body>
</html>
